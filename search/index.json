[{"content":"","date":"2024-09-23T19:43:18+08:00","permalink":"https://www.brasswrench.com/posts/artificial_intelligence/computer_vision/frontier_topic_3d_reconstruction/3d_gaussian_splatting_basic_principles/","title":"三维重建（一）：3D高斯泼溅算法的基本原理"},{"content":" 操作系统引论 操作系统（Operating System，OS） 是配置在计算机硬件上的第一层软件，是对硬件系统的首次扩充，其主要作用是管理好这些设备，提高它们的利用率和系统的吞吐量，并为用户和应用程序提供一个简单的接口，便于用户使用。OS是现代计算机系统中最基本和最重要的系统软件，而其他的诸如编译程序、数据库管理系统等系统软件，以及大量的应用软件，都直接依赖于操作系统的支持，取得它所提供的服务。事实上OS已经成为现代计算机系统、多处理机系统、计算机网络中都必须配置的系统软件。\n操作系统的目标和作用 操作系统的目标与应用环境有关。例如在查询系统中所用的OS，希望能提供良好的人机交互性；对于工业控制、武器控制以及多媒体环境下的OS，要求其具有实时性。而对于微机上配置的OS，则更看重的是其使用的方便性。\n操作系统的目标 在计算机系统上配置操作系统，其主要目标是：方便性、有效性、可扩充性和开放性。\n方便性 一个未配置OS的计算机系统是极难使用的。用户如果想直接在计算机硬件（裸机）上运行自己的程序，就必须用机器语言书写；但是如果配置了OS，系统就可以使用编译命令将用户采用高级语言书写的程序翻译成机器代码，或直接通过OS所提供的各种命令操纵计算机系统，极大地方便了用户，使计算机变得易学易用。\n有效性 有效性所包含的第一层含义是提高系统资源的利用率。在早期未配置OS的计算机系统中，诸如处理机、I/O设备等都经常处于空闲状态，各种资源无法得到充分利用，所以在当时，提高系统资源利用率是推动OS发展最主要的动力。有效性的另一层含义是提高系统的吞吐量。OS可以通过合理地组织计算机的工作流程，加速程序的运行，缩短程序的运行周期，从而提高了系统的吞吐量。\n方便性和有效性是设计OS时最重要的两个目标。在过去很长的一段时间内，由于计算机系统非常昂贵，有效性显得特别重要。然而，近十多年来，随着硬件越来越便宜，在设计配置在微机上的OS时，似乎更加重视如何提高用户使用计算机的方便性。因此，在微机操作系统中都配置了深受用户欢迎的图形用户界面，以及为程序员提供了大量的系统调用，方便了用户对计算机的使用和编程。\n可扩充性 为适应计算机硬件、体系结构以及计算机应用发展的要求，OS必须具有很好的可扩充性。可扩充性的好坏与OS的结构有精密的联系，由此推动了OS结构的不断发展。从早期的无结构发展成模块化结构，进而又发展成层次化结构，近年来OS已广泛采用了微内核结构。微内核结构能方便地增添新的功能和模块，以及对原有的功能和模块进行修改，具有良好的可扩充性。\n开放性 随着计算机应用的日益普及，计算机硬件和软件的兼容性问题便提到了议事日程上来。世界各国相应地制定了一系列的软、硬件标准，使得不同厂家按照标准生产的软、硬件都能在本国范围内很好地相互兼容。这无疑给用户带来了极大的方便，也给产品的推广、应用铺平了道路。近年来，随着Internet的迅速发展，使得计算机OS的应用环境由单机环境转向了网络环境，其应用环境就必须更为开放，进而对OS的开放性提出了更高的要求。\n所谓开放性，是指系统能遵循世界标准规范，特别是遵循开放系统互连OSI国际标准。事实上，凡遵循国际标准所开发的硬件和软件，都能彼此兼容，方便地实现互连。开放性已称为20世纪90年代以后计算机技术的一个核心问题，也是衡量一个新推出的系统或软件能否被广泛应用的至关重要的因素。\n操作系统的作用 操作系统在计算机系统中所起的作用，可以从用户、资源管理及资源抽象等多个不同的角度来进行分析和讨论。\nOS作为用户与计算机硬件系统之间的接口 OS作为用户与计算机硬件系统之间的接口的含义是：OS处于用户与计算机硬件系统之间，用户通过OS来使用计算机系统。或者说，用户在OS帮助下能够方便、快捷、可靠地操纵计算机硬件和运行自己的程序。图1是OS作为接口的示意图。由图可看出，用户可通过三种方式使用计算机，即通过命令方式、系统调用方式和图标\u0026mdash;窗口方式来实现与操作系统的通信，并取得它的服务。\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e 用户 应用程序 命令 系统调用 图标—窗口 操作系统 计算机硬件 图1 OS作为接口的示意图\nOS作为计算机系统资源的管理者 在一个计算机系统中，通常都含有多种硬件和软件资源。归纳起来可将这些资源分为四类：处理机、存储器、I/O设备以及文件（数据和程序）。相应地，OS的主要功能也正是对这四类资源进行有效的管理。处理机管理适用于分配和控制处理机；存储器管理主要负责内存的分配与回收；I/O设备管理是负责I/O设备的分配（回收）与操纵；文件管理适用于实现对文件的存取、共享和保护。可见，OS的确是计算机系统资源的管理者。\n当一台计算机系统供多个用户使用时，诸多用户对系统中共享资源的需求（包括数量和时间）有可能发生冲突。为此，操作系统必须对使用资源的请求进行授权，以协调诸用户对共享资源的使用。\nOS实现了对计算机资源的抽象 对一台完全无软件的计算机系统（即裸机），由于它向用户提供的仅是硬件接口（物理接口），因此，用户必须对物理接口的实现细节有充分的了解，这就致使该物理机器难于广泛使用。为了方便用户使用I/O设备，人们在裸机上覆盖上一层I/O设备管理软件，如图2所示，由它来实现对I/O设备操作的细节，并向上将I/O设备抽象为一组数据结构以及一组I/O操作命令，如read或write命令，这样用户即可利用这些数据结构及操作命令来进行数据输入或输出，而无需关心I/O是如何具体实现的。此时用户所看到的机器是一台比裸机功能更强、使用更方便的机器。换言之，在裸机上铺设的I/O软件隐藏了I/O设备的具体细节，向上提供了一组抽象的I/O设备。\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e 用户 物理接口 硬件 用户 物理接口 硬件 I/O软件 I/O操作命令 ( r e a d , wri t e ) 虚机器 图2 I/O软件隐藏了I/O操作实现的细节\n通常把覆盖了上述软件的机器称为扩充机器或者虚机器。它向用户提供了一个对硬件操作的抽象模型。用户可利用该模型的接口使用计算机，无需了解物理接口的实现细节，从而使用户更容易地使用计算机硬件资源。亦即，I/O设备管理软件实现了对计算机硬件操作的第一个层次的抽象。\n同理，为了方便用户使用文件系统，又可在第一层软件（I/O管理软件）上再覆盖一层用于文件管理的软件，由它来实现对文件操作的细节，并向上层提供一组实现对文件进行存取操作的数据结构和命令。这样，用户可利用该软件提供的数据结构及命令对文件进行存取。此时用户所看到的是一台功能更强、使用更方便的虚机器。亦即，文件管理软件实现了对硬件资源操作的第二个层次的抽象。以此类推，如果文件管理软件上再覆盖一层面向用户的窗口软件，则用户便可在窗口环境下方便地使用计算机，从而形成一台功能更强的虚机器。\n由此可知，OS是铺设在计算机硬件上的多层软件的集合，它们不仅增强了系统的功能，还隐藏了对硬件操作的具体细节，实现了对计算机硬件操作的多个层次的抽象模型。值得说明的是，不仅可在底层对一个硬件资源加以抽象，还可以在高层对该资源底层已抽象的模型再次进行抽象，称为更高层的抽象模型。随着抽象层次的提高，抽象接口所提供的功能就越强，用户使用起来也越方便。\n推动操作系统发展的主要动力 OS自20世纪50年代产生后，经历了由简单到复杂，由低级到高级的发展。在短短60多年间，OS在各方面都有了长足的进步，能够很好地适应计算机硬件和体系结构的快速发展，以及应用需求的不断变化。下面我们对推动OS发展的主要推动力做具体阐述。\n不断提高计算机资源利用率 在计算机发展的初期，计算机系统特别昂贵，人们必须千方百计地提高计算机系统中各种资源的利用率，这就是OS最初发展的推动力。由此形成了能自动地对一批作业进行处理的多道批处理系统。20世纪60年代和70年代有分别出现了能够有效提高I/O设备和CPU利用率的SPOOLing系统，以及极大地改善了存储器系统利用率的虚拟存储器技术。此后在网络环境下，通过在服务器上配置网络文件系统和数据库系统算法，将资源提供给全网络用户共享，又进一步提高了资源的利用率。\n方便用户 当资源利用率不高的问题得到基本解决后，用户在上机、调试程序时的不方便行便成为主要矛盾，这又成为继续推动OS发展的主要因素。20世纪60年代分时系统的出现，不仅提高了系统资源的利用率，还能实现人\u0026mdash;机交互，使用户能像早期使用计算机时一样，感觉自己是独占全机资源，对其进行直接操控，极大地方便了程序员对程序进行调试和修改的操作。90年代初，图形用户界面的出现收到用户的广泛欢迎，进一步方便了用户对计算机的使用，这无疑又加速推动了计算机的迅速普及和广泛使用。\n器件的不断更新换代 随着IT技术的飞讯发展，尤其是微机芯片的不断更新换代，使得计算机的性能快速提高，从而也推动了OS的功能和性能迅速增强和提高。例如当微机芯片由8位发展到16位、32位，进而又发展到64位时，相应的微机OS也就由8位OS发展到16位和32位，进而又发展到64位，此时，相应OS的功能和性能也有了显著的增强和提高。\n与此同时，外部设备也在迅速发展。OS所能支持的外部设备也越来越多，如现在的微机OS已能够支持种类繁多的外部设备，除了传统的外设外，还可以支持光盘、移动硬盘、闪存盘、扫描仪、数码相机等。\n计算机体系结构的不断发展 计算机体系结构的发展，也不断推动着OS的发展，并产生新的OS类型。例如当计算机由单处理机系统发展为多处理机系统时，相应地，OS也就由单处理机OS发展为多处理机OS。又如当出现了计算机网络后，配置在计算机网络上的操作系统也就应运而生。它不仅能有效地管理好网络中的共享资源，而且还向用户提供了许多网络服务。\n不断提出新的应用需求 操作系统能如此迅速发展的另一个重要原因是，人们不断提出新的应用需求，例如，为了提高产品的质量和数量，需要将计算机应用于工业控制中，此时在计算机上就需要配置能进行实时控制的OS，由此产生了实时OS。此后，为了能满足用户在计算机上听音乐、看电影和玩游戏等需求，又在OS中添加了多媒体功能。另外，由于在计算机系统中保存了越来越多的宝贵信息，致使能够确保系统的安全性也成为OS必须具备的功能。尤其是随着VLSI（超大规模集成电路） 的发展，计算机芯片的体积越来越小，价格也越来越便宜，大量智能设备应运而生，这样，微机操作系统的产生和发展也成了一种必然。\n操作系统的发展过程 在20世纪50年代中期，出现了第一个简单的批处理OS；60年代中期开发出多道程序批处理系统；不久又推出分时系统，与此同时，用于工业和武器控制的实时OS也相继问世。20世纪70到90年代，是VLSI和计算机体系结构大发展的年代，导致了卫星及、多处理机和计算机网络的诞生和发展，与与此相应地，也相继开发出了微机OS，多处理机OS和网络OS，并得到极为迅猛的发展。\n未配置操作系统的计算机系统 从1945年诞生的第一台计算机，到50年代中期的计算机，都属于第一代计算机。这时还未出现OS，对计算机的全部操作都是由用户采取人工操作方式进行的。\n人工操作方式 早期的操作方式是由程序员将事先已穿孔的纸带（或卡片），装入纸带输入机（或卡片输入机），再启动它们将纸带（或卡片）上的程序和数据输入计算机，然后启动计算机运行。仅当程序运行完毕并取走计算结果后，才允许下一个用户上机。这种人工操作方式有以下两方面缺点：\n(1)用户独占全机，即一台计算机的全部资源由上级用户所独占。\n(2)CPU等待人工操作。当用户进行装带（卡），卸带（卡）等人工操作时，CPU及内存等资源是空闲的。\n可见，人工操作方式严重降低了计算机资源的利用率，此即所谓的人机矛盾。虽然CPU的速度在迅速提高，但I/O设备的速度却提高缓慢，这使CPU与I/O设备之间速度不匹配的矛盾更加突出。为此，曾先后出现了通道技术、缓冲技术，然而都未能很好地解决上述矛盾，直到后来引入了脱机输入/输出技术，才获得了相对较为满意的结果。\n脱机输入/输出（Off-Line IO）方式 为了解决人机矛盾及CPU和I/O设备之间速度不匹配的矛盾，20世纪50年代末出现了脱机I/O技术。该技术是实现将装有用户程序和数据的纸带装入纸带输入机，在一台外围机的控制下，把纸带（卡片）上的数据（程序）输入到磁带上。当CPU需要这些程序和数据时，再从磁带上高速地调入内存。\n类似地，当CPU需要输出时，可先由CPU把数据直接从内存高速地输送到磁带上，然后在另一台外围机的控制下，再将此大地上的结果通过相应地输出设备输出。图3示出了脱机输入/输出的过程。\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e 输入设备 外围机 磁盘 磁盘 主机 磁盘 磁盘 外围机 输出设备 图3 脱机I/O示意图\n由于程序和数据的输入和输出都是在外围机的控制下完成的，或者说，它们是在脱离主机的情况下进行的，故称为脱机输入/输出方式。反之，把在主机的直接控制下进行输入/输出的方式称为联机输入/输出（On-Line I/O） 方式。这种脱机I/O方式的主要优点为：\n(1)减少了CPU的空闲时间。装带、卸带，以及将数据从低俗I/O设备送到高速磁带上（或反之）的操作，都是在脱机情况下由外围机万郴个，并不占用主机时间，从而有效地减少了CPU的空闲时间。\n(2)提高了I/O速度。当CPU在运行中需要输入数据时，是直接从高速的磁带上将数据输入到内存的，这便极大地提高了I/O速度，从而进一步减少了CPU的空闲时间。\n单道批处理系统（Simple Batch Processing System） 20世纪50年代中期出现了第二代晶体管计算机，此时计算机虽已具有推广应用的价值，但计算机系统仍然非常昂贵，为了能充分地提高它的利用率，应尽量保持系统的连接运行，即在处理完一个作业后，紧接着处理下一个作业，以减少机器的空闲等待时间。\n单道批处理系统的处理过程 为了实现对作业的连续处理，需要先把一批作业以脱机方式输入到磁带上，并在系统中配上监督程序（Monitor），在它的控制下，使这批作业能一个接一个连续处理。其处理过程是：首先由监督程序将磁带上的第一个作业装入内存，并把运行控制权交给该作业；当该作业处理完成时，又把控制权交给监督程序，再由监督程序把磁带上的第二个作业调入内存。计算机系统就这样自动地一个作业紧接着一个作业地进行处理，直至磁带上的所有作业全部完成，这样便形成了早期的批处理系统。虽然系统对作业的处理是成批进行的，但在内存中时终止保持一道作业，故称为单道批处理系统。图4示出了单道批处理系统的处理流程。\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e 还有下一个作业？ 把下一个作业的源程序转换为目标程序 是 源程序有错吗？ 开始 否 装配目标程序 运行目标程序 是 否 停止 图4 单道批处理系统的处理流程\n单道批处理系统的缺点 单道批处理系统最主要的缺点是，系统中的资源得不到充分的利用。这是因为在内存中仅有一道程序，每逢该程序在运行中发出I/O请求后，CPU便处于等待状态，必须在其I/O完成后才继续运行。又因I/O设备的低速性，更使CPU的利用率显著降低。图5示出了单道程序的运行情况，从图可以看出：在 $t_2$ ~ $t_3$ 、 $t_6$ ~ $t_7$ 时间间隔内CPU空闲。\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e 用户程序 监督程序 I/O操作 I/O中断请求 启动I/O I/O完成 结束中断 I/O中断请求 启动I/O I/O完成 结束中断 t 1 t 2 t 3 t 4 t 5 t 6 t 7 t 8 t 图5 单道程序的运行情况\n为了能在系统中运行较大的作业，通常在计算机中都配置了较大容量的内存，但实际情况是有80%以上的作业都属于中小型，因此在单道程序环境下，也必定造成内存的浪费。类似地，为了满足各种类型的作业需要，在系统中将会配置多种类型的I/O设备。显然在单道程序环境下也不能充分利用系统资源。\n多道批处理系统（Multiprogrammed Batch Processing System） 20世纪60年代中期，IBM公司生产了第一台小规模集成电路计算机IBM 360（第三代计算机系统）。由于它较之于晶体管计算机无论在体积、功耗、速度和可靠性上都有了显著的改善，因而获得了极大的成功。IBM公司为该机开发的OS/360操作系统是第一个能运行多道程序的批处理系统。\n多道程序设计的基本概念 为了进一步提高资源的利用率和系统吞吐量，在20世纪60年代中期引入了多道程序设计技术，由此形成了多道批处理系统。在该系统中，用户所提交的作业先存放在外存上，并排成一个队列，称为“后备队列”。然后由作业调度程序按一定的算法，从后备队列中选择若干个作业调入内存，使它们共享CPU和系统中的各种资源。由于同时在内存中装有若干道程序，这样便可以在运行程序A时，利用其因I/O操作而暂停执行时的CPU空挡时间，再调度另一道程序B运行，同样可以利用程序B在I/O操作时的空档时间，再调度程序C运行，使多道程序交替地运行，这样便可以保持CPU处于忙碌状态。图6示出了四道程序时的运行情况。\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e 程序A 程序B 程序C 程序D 调度程序 程序B 程序AI/O请求 程序BI/O请求 程序A 程序A IO处理 程序B I/O处理 程序C 程序C I/O处理 程序D 程序CI/O请求 程序DI/O请求 程序A I/O完成 程序A再被调度 程序C I/O完成 程序A 完成 程序C 再被调度 程序D I/O处理 程序B被调度 程序C 程序C被调度 程序D被调度 CPU执行线 程序A 调度 调度 调度 调度 调度 图6 多道程序的运行情况\n多道批处理系统的优缺点 多道批处理系统的优点如下：\n(1)资源利用率高。引入多道批处理能使多道程序交替运行，以保持CPU处于忙碌状态；在内存中装入多道程序可提高内存的利用率；此外还可以提高I/O设备的利用率。\n(2)系统吞吐量大。能提高系统吞吐量的主要原因可归结为：\n①CPU和其他资源保持“忙碌状态”；\n②仅当作业完成时或运行不下去时才进行切换，系统开销小。\n多道批处理系统的缺点如下：\n(1)平均周转时间长。由于作业要排队依次进行处理，因而作业的周转时间较长，通常需几个小时，甚至几天。\n(2)无交互能力。用户一旦把作业提交给系统后，直至作业完成，用户都不能与自己的作业进行交互，修改和调试程序极不方便。\n多道批处理系统需要解决的问题 多道批处理系统是一种十分有效，但又非常复杂的系统，为使系统中的多道程序间能协调地运行，系统必须解决下述一系列问题：\n(1)处理机争用问题。既要能满足各道程序运行的需要，又要能提高处理机的利用率。\n(2)内存分配和保护问题。系统应能为每道程序分配必要的内存空间，使它们各得其所，且不会因某道程序出现异常情况而破坏其他程序。\n(3)I/O设备分配问题。系统应采取适当的策略来分配系统中的I/O设备，以达到既能方便用户对设备的使用，又能提高设备利用率的目的。\n(4)文件的组织和管理问题。系统应能有效地组织存放在系统中的大量的程序和数据，使它们既便于用户使用，又能保证数据的安全性。\n(5)作业管理问题。系统中存在着各种作业（应用程序），系统应能对系统中所有的作业进行合理的组织，以满足这些作业用户的不同需求。\n(6)用户与系统的接口问题。为使用户能方便的使用操作系统，OS还应提供用户与OS之间的接口。\n为此，应在计算机系统中增加一组软件，用以对上述问题进行妥善、有效的处理。这组软件应包括：能有效地组织和管理四大资源的软件、合理地对各类作业进行调度和控制它们运行的软件，以及方便用户使用计算机的软件。正是这样一组软件构成了操作系统。据此，我们可以把操作系统定义为：操作系统是一组能有效地组织和管理计算机硬件和软件资源，合理地对各类作业进行调度，以及方便用户使用的程序的集合。\n分时系统（Time Sharing System） 分时系统的引入 如果说推动多道批处理系统形成和发展的主要动力是提高资源利用率和系统吞吐量，那么，推动分时系统的形成和发展的主要动力，则是为了满足用户对人\u0026mdash;机交互的需求，由此形成了一种新型OS，用户的需求具体表现在以下几个方面：\n(1)人\u0026mdash;机交互。每当程序员写好一个新程序时，都需要上机进行调试。由于新编程序难免存在一些错误或不当之处，需要进行修改，因此用户希望能像早期使用计算机时一样，独占权及并对它进行直接控制，宜宾能方便地对程序中的错误进行修改。亦即，用户希望能进行人\u0026mdash;机交互。\n(2)共享主机。在20世纪60年代，计算机还十分昂贵，一台计算机要同时供很多用户共享使用。显然，用户们在共享一台计算机时，每个人都希望能像独占时一样，不仅可以随时与计算机进行交互，而且还不会感觉到其他用户的存在。\n由上述不难得知，分时系统是指，在一台主机上连接了多个配有显示器和键盘的终端并由此所组成的系统，该系统允许多个用户同时通过自己的终端，以交互方式使用计算机，共享主机中的资源。\n分时系统实现中的关键问题 在多道批处理系统中，用户无法与自己的作业进行交互的主要原因是：作业都先驻留在外存上，即使以后被调入内存，也要经过较长时间的等待后方能运行。用户无法与自己的作业进行交互。为了能够实现人机交互，必须解决的关键问题是，如何使用户能与自己的作业进行交互。为此，系统首先必须能提供多个终端，同时给多个用户使用。其次，当用户在自己的终端上键入命令时，系统应能及时接收，并及时处理该命令，再将结果返回给用户。此后，用户可根据系统返回的响应情况，再继续键入下一条命令，此即人\u0026mdash;机交互。亦即，允许有多个用户同时通过自己的键盘键入命令，系统也应能全部及时接收并处理。\n(1)及时接收。要做到及时接收多个用户键入的命令或数据，只需在系统中配置一个多路卡即可。例如当主机上要连接64个终端时，就配置一个64用户的多路卡。多路卡的作用是，实现分时多路复用。即主机以很快的速度周期性地扫描各个终端，在每个终端处停留很短的时间，如30ms，用于接收从终端发来的数据。对于64用户的多路卡，用不到2秒的时间便可完成一次扫描，即主机能用不到2秒的时间分时接收哥哥用户从终端上输入的数据一次。此外，为了能使从终端上输入的数据被依次逐条地进行处理，还需要为每个终端配置一个缓冲区，用来暂存用户键入的命令（或数据）。\n(2)及时处理。人\u0026mdash;机交互的关键在于，用户键入命令后，能对自己的作业及其运行及时地实时控制，或进行修改。因此，各个用户的作业都必须驻留在内存中，并能频繁地获得处理机运行。否则，用户键入的命令将无法作用到自己的作业上。由此可见，为了实现人\u0026mdash;机交互，必须彻底地改变原来批处理系统的运行方式，转而采用下面的方式：\n①作业直接进入内存。因为作业在磁盘上是不能运行的，所以作业应该直接进入内存。\n②采用轮转运行方式。如果一个作业独占CPU连续运行，那么其他作业就没有机会被调度运行。为避免一个作业长期独占处理机，引入了时间片的概念。一个时间片，就是一段很短的时间（例如30ms）。系统规定每个作业每次只能运行一个时间片，然后就暂停该作业的运行，并立即调度下一个作业的运行。如果在不长时间内能使所有的作业都执行一个时间片的时间，便可以使每个用户都能及时地与自己的作业进行交互，从而可使用户的请求得到及时相应。\n分时系统的特征 分时系统与多道批处理系统相比，具有非常明显的不同特性，可归纳成以下四个方面。\n(1)多路性。该特性是指系统允许将堕胎终端同时连接到一台主机上，并按分时原则为每个用户服务。多路性允许多个用户共享一台计算机，显著地提高了资源利用率，降低了使用费用，从而促进了计算机更广泛的应用。\n(2)独立性。该特性是指系统提供了这样的用机环境，即每个用户在各自的终端上进行操作，彼此之间互不干扰，给用户的感觉就像是他一人独占主机进行操作。\n(3)及时性。及时性是指用户的请求能在很短时间内获得响应。这一时间间隔是根据人们所能接受的等待时间确定的，通常仅为1~3秒钟。\n(4)交互性。交互性是指用户可通过终端与系统进行广泛的人机对话。其广泛性表现在：用户可以请求系统提供多方面的服务，如进行文件编辑和数据处理，访问系统中的文件系统和数据库系统，请求提供打印服务等。\n实时系统（Real Time System） 所谓实时，是表示“及时”。而“实时计算”，则可定义为这样一类计算：系统的正确性，不仅由计算的逻辑结果来确定，而且还取决于产生结果的时间。事实上实时系统最主要的特征，是将时间作为关键参数，它必须对所接收到的某些信号做出“及时”或“实时”的反应。由此得知，实时系统是指系统能及时响应外部事件的请求，在规定时间内完成对该事件的处理，并控制所有实时任务协调一致地运行。\n实时系统的类型 随着计算机应用的普及，实时系统的类型也相应增多，下面列出当前常见的几种：\n(1)工业（武器）控制系统。当计算机被用于生产过程的控制，形成以计算机为中心的控制系统时，该系统应具有能实时采集现场数据，并对所采集的数据进行及时处理，进而能够自动地控制相应的执行机构，使之具有按预定的规律变化的功能，确保产品的质量和产量。类似地，也可将计算机用于对武器的控制，如火炮的自动控制系统、飞机的自动驾驶系统、以及导弹的制导系统等。\n(2)信息查询系统。该系统接受从远程终端上发来的服务请求，根据用户提出的请求，对信息进行检索和处理，并能及时对用户做出正确的回答。实时信息处理系统由飞机或火车的订票系统等。\n(3)多媒体系统。随着计算机硬件和软件的快速发展，已可将文本、图像、音频和视频等信息集成在一个文件中，形成一个多媒体文件。如在用DVD播放器所播放的数字电影中就包含了音频、适配和横向滚动的文字等信息。为了保证有好的听觉和视觉感受，用于播放音频和视频的多媒体系统等，也必须是实时信息处理系统。\n(4)嵌入式系统。随着集成电路的发展，已制作出各种类型的芯片，可将这些芯片嵌入到各种一起和设备中，用于对设备进行控制或对其中的信息作出处理，这样就构成了所谓的智能仪器和设备。此时还需要配置嵌入式OS，它同样需要具有实时控制或处理的功能。\n实时任务的类型 (1)周期性实时任务和非周期性实时任务。周期性实时任务是指这样一类任务，外部设备周期性地发出激励信号给计算机，要求它按指定周期循环执行，以便周期性地控制某我i不设备。反之，非周期性实时任务并无明显的周期性，但都必须联系着一个截止时间（Deadline），或称为最后期限。它又可分为：①开始截止时间：指某个任务在某时间以前必须开始执行；②完成截止时间：指某任务在某时间以前必须完成。\n(1)硬实时任务和软实时任务。硬实时任务（Hard Real-time Task，HRT） 是指系统必须满足任务对截止时间的要求，否则可能出现难以预测的后果。用于工业和武器控制的实时系统，通常它所执行的是硬实时任务。软实时任务（Soft Real-time Task, SRT） 也联系着一个截止时间，但并不严格，若偶尔错过了截止时间，对系统产生的影响也不会太大。诸如用于信息查询系统和多媒体系统中的实时系统，通常是软实时任务。\n实时系统与分时系统特征的比较 (1)多路性。信息查询系统和分时系统中的多路性都表现为系统按分时原则为多个终端用户服务；实时控制系统的多路性则是指系统周期性地对多路现场信息进行采集，以及对多个对象或多个执行机构进行控制。\n(2)独立性。信息查询系统中的每个终端用户在与系统交互时，彼此相互独立互不干扰，同样在实时控制系统中，对信息的采集和对对象的控制也都是彼此互不干扰的。\n(3)及时性。信息查询系统对实时性的要求是依据人所能接受的等待时间确定的。而多媒体系统实时性的要求是，播放出来的音乐和电视能令人满意。实时控制系统的实时性则是以控制对象所要求的截止时间来确定的，一般为秒级到毫秒级。\n(4)交互性。在信息查询系统中，人与系统的交互性仅限于访问系统中某些特定的专用服务程序，它并不像分时系统那样，能向终端用户提供数据处理、资源共享等服务。而多媒体系统的交互性也仅限于用户发送某些特定的命令，如开始、停止、快进等，由系统立即响应。\n(5)可靠性。分时系统要求系统可靠，实时系统要求系统高度可靠，因为任何差错都可能带来无法预料的灾难性的后果。因此，在实时系统中，往往都采取了多级容错措施来保障系统的安全性及数据的安全性。\n微机操作系统的发展 随着VLSI和计算机体系结构的发展，以及应用需求的不断扩大，操作系统仍在继续发展。由此先后形成了微机操作系统、网络操作系统等。本小节对微机操作系统的发展作扼要的介绍。\n配置在微型机上的操作系统称为微机操作系统，最早诞生的危机操作系统是配置在8位微机上的CP/M，后来出现了16位微机，相应地，16位微机操作系统也就应运而生。当微机发展为32位、64位时，32位和64位微机操作系统也应运而生。可见微机操作系统可按微机的字长来分，但也可以将它按运行方式分为如下几类：\n单用户单任务操作系统 单用户单任务操作系统的含义是：只允许一个用户上机，且只允许用户程序作为一个任务运行，这是最简单的微机操作系统，主要配置在8位和16位微机上，最有代表性的单用户单任务微机操作系统时CP/M和MS-DOS。\n①CP/M\n1974年第一代通用8位微处理机芯片Intel 8080出现后的第二年，Digital Research公司就开发出带有软盘系统的8位微机操作系统CP/M。1977年Digital Research公司对CP/M进行了重写，使其剋配置在以Intel 8080、8085、Z80等8位芯片为基础的多种微机上。1979年又推出带有硬盘管理功能的CP/M 2.2版本。由于CP/M具有较好的体系结构，可适应性强，可以执行以及易学易用等优点，使之在8位微机中占据了统治地位。\n②MS-DOS\n1981年IBM公司首次推出了IBM-PC个人计算机（16位微机），在微机中采用了微软公司开发的MS-DOS（Disk Operating System） 操作系统，该操作系统在CP/M的基础上进行了较大的扩充，使其在功能上有很大的提高。1983年IBM退出PC/AT（配有Intel 80286芯片），相应地微软又开发出MS-DOS 2.0版本，它不仅能支持硬盘设备，还采用了树形目录结构的文件系统。1987年又宣布了MS-DOS 3.3版本。从MS-DOS 1.0到3.3位置的版本都属于单用户单任务操作系统，内存被限制在640KB。从1989到1993年又先后推出了多个MS-DOS版本，它们都可以配置在Intel 80386、80486等32位微机上。从80年代到90年代初，由于MS-DOS性能优越受到当时用户的广泛欢迎，称为事实上的16位单用户单任务操作系统标准。\n单用户多任务操作系统 单用户多任务操作系统的含义是，只允许一个用户上机，但允许用户把程序分为若干个任务，使它们并发执行，从而有效地改善了系统的性能。目前在32位维基上配置的操作系统，基本上都是单用户多任务操作系统。其中最有代表性的是由微软公司推出的Windows。1985年和1987年微软公司先后推出了Windows 1.0和Windows 2.0版本操作系统，由于当时的硬件平台还只是16位微机，对1.0和2.0版本不能很好地支持。1990年微软公式又发布了Windows 3.0版本，随后又宣布了Windows 3.1版本，它们主要是针对386和486等32位微机开发的，它较之以前的操作系统有着很重大的改进，引入了友善的图形用户界面，支持多任务和扩展内存的功能。使计算机更好使用，从而称为386和486等微机的主流操作系统。\n1995年微软公司推出了Windows 95，它较之以前的Windows 3.1有许多重大改进，采用了全32位的处理技术，并兼容以前的16位应用程序，在该系统中还集成了支持Internet的网络功能。1998年微软公司又推出了Windows 95的改进版Windows 98，它已是最后一个仍然兼容以前16位应用程序的Windows。其最主要的改进是把微软公司自己开发的Internet浏览器整合到系统中，大大方便了用户上网浏览；另一个改进是增加了对多媒体的支持。2001年微软又发布了Windows XP，同时提供了家用和商业工作站两种版本，在此后相当长的一段时间，称为使用最广泛的个人操作系统之一。在开发上述Windows操作系统的同时，微软公司又开始对网络操作系统Windows NT进行开发，它是针对网络开发的操作系统，在系统中融入许多面向网络的功能，从2006年后推出的一系列内核版本号为NT6.X的桌面操作系统，包括Windows Vista、Windows 7、Windows 8等，这里就不对它们进行介绍。\n多用户多任务操作系统 多用户多任务操作系统的含义是，允许多个用户通过各自的终端，使用同一台机器，共享主机系统中的各种资源，而每个用户程序又可进一步分为几个任务，使它们能并发执行，从而可进一步提高资源利用率和系统吞吐量。在大、中和小型机中配置的大多是多用户多任务操作系统，而在32位微机上，也有不少配置的是多用户多任务操作系统，其中最有代表性的是UNIX OS。\nUNIX OS是美国电报电话公司的Bell实验室在1969~1970年期间开发的，1979年推出来的UNIX V.7已被广泛应用于多种小型机上。随着微机性能的提高，人们又将UNIX移植到微机上。在1980年后，将UNIX第7版本移植到Motorola公司的MC 680xx微机上，后来又将UNIX V7.0版本进行简化后，移植到Intel 8080上，把它称为Xenix。现在最有影响的两个能运行在微机上的UNIX操作系统变形是Solaris OS和Linux OS。\n(1)Solaris OS：SUN公司于1982年推出的SUN OS 1.0，是一个运行在MOTOROLA 680X0平台上的UNIX OS，在1988年宣布的SUN OS 4.0，把运行平台从早期的MOTOROLA 680X0平台迁移到SPARC平台，并开始支持Intel公司的80X86；1992年SUN发布了Solaris 2.0。从1998年开始，Sun公司推出64位操作系统Solaris 2.7和2.8，这几款操作系统在网络特性、互操作性、兼容性以及易于配置和管理方面均有很大的提高。\n(2)Linux OS：Linux是UNIX的一个重要变种，最初是由芬兰学生Linus Torvalds针对Intel 8086开发的，1991年，在Internet网上发布第一个Linux版本，由于源代码公开，因此有很多人通过Internet与之合作，使Linux的性能迅速提高，其应用范围也日益扩大，相应地，源代码而急剧膨胀，此时它已是具有全面功能的UNIX系统，大量在UNIX上运行的软件（包括1000多种使用工具软件和大量网络软件），被移植到Linux上，而且可以在主要的微机上运行，如Intel 80X86 Pentium等。\n操作系统的基本特性 前面所介绍的多道批处理系统、分时系统和实时系统这三种基本草祖宗系统都具有各自不同的特征，如批处理系统有着高的资源利用率和系统吞吐量；分时系统能获得及时响应；实时系统具有实时特征。除此之外，它们还共同具有并发、共享、虚拟和异步四个基本特征。\n并发 正是系统中的程序能并发执行这一特征，才使得OS能有效地提尕奥系统中的资源利用率，增加系统的吞吐量。\n并行与并发 并行性和并发性是既相似又有区别的两个概念。并行性是指两个或多个事件在同一时刻发生。而并发性是指两个或多个事件在同一时间间隔内发生。在多道程序环境下，并发性是指在一段时间内宏观上有多个程序在同时运行，但在单处理机系统中，每一时刻却只能有一道程序执行，故微观上这些程序只能是分时地交替进行。\n","date":"2024-09-19T22:28:10+08:00","permalink":"https://www.brasswrench.com/posts/computer_science/operating_system/introduction_to_operating_system/","title":"操作系统（一）：操作系统引论"},{"content":" 马尔可夫过程 引言 有一类随机过程，它具备所谓的“无后效性”(马尔可夫性)，即，要确定过程将来的状态，知道它此刻的情况就足够了，并不需要对它以往的情况的认识，这类过程称为马尔可夫过程。本文将介绍马尔可夫过程中最简单的两种类型：离散时间马尔可夫链（简称马氏链）及连续时间的马尔可夫链。\n基本概念 马尔可夫链的定义 马尔可夫链 定义1：给定随机过程 $\\{X_n,n=0,1,2,\\cdots\\}$ ，若它只取有限或可列个值 $E_0,E_1,E_2,\\cdots$（我们以 $\\{0,1,2,\\cdots\\}$ 来标记 $E_0,E_1,E_2$ 并称他们是过程的状态， $\\{0,1,2\\cdots\\}$ 或者其子集记为 $S$ ，称为过程的状态空间）。若对 $\\{X_n,n=0,1,2,\\cdots\\}$ （一般就认为它的状态是非负整数）和任意的 $\\;n\\ge0\\;$ 及状态 $i,j,i_0,i_1\\cdots,i_{n-1}$ ，有\n$$ \\begin{aligned} \u0026P\\{X_{n+1}=j\\;|\\;X_0=i_0,X_1=i_1,X_2=i_2,\\cdots,X_{n-1}=i_{n-1},X_n=i\\}\\\\[5pt] =\u0026P\\{X_{n+1}=j\\;|\\;X_n=i\\} \\end{aligned} \\tag{1} $$ 则称随机过程 $\\{X_n,n=0,1,2,\\cdots\\}$ 为马尔可夫链。\n马尔可夫性 式1刻画了马尔可夫链的特性，故称为马尔可夫性。\n转移概率 转移概率 定义2：称式1中的条件概率 $P\\{X_{n+1}=j\\;|\\;X_n=i\\}$ 为马尔可夫链 $\\{X_n,n=0,1,2,\\cdots\\}$ 的一步转移概率，简称转移概率。\n一般情况下，转移概率与状态$i,j$和时刻$n$有关。\n时齐马尔可夫链 定义3：当马尔可夫链的转移概率只与状态 $i,j$ 有关，而与 $n$ 无关时，称马尔可夫链为时齐的，并记 $p_{ij}=P\\{X_{n+1}=j\\;|\\;X_n=i\\}(n \\ge 0)$ ；否则，就称之为非时齐的。\n本文只讨论时齐马尔可夫链并将其简称为马尔可夫链。\n有限链和无限链 当马尔可夫链的状态为有限时，成为有限链，否则成为无限链。但无论状态有限还是无限，我们都可以将 $p_{ij}(i,j\\in S)$ 排成一个矩阵的形式，令\n$$ \\mathbf{P}=(p_{ij})= \\begin{pmatrix} p_{00} \u0026 p_{01} \u0026 p_{02} \u0026 p_{03} \u0026 \\cdots \\\\ p_{10} \u0026 p_{11} \u0026 p_{12} \u0026 p_{13} \u0026 \\cdots \\\\ p_{20} \u0026 p_{21} \u0026 p_{22} \u0026 p_{23} \u0026 \\cdots \\\\ p_{30} \u0026 p_{31} \u0026 p_{32} \u0026 p_{33} \u0026 \\cdots \\\\ \\vdots \u0026 \\vdots \u0026 \\vdots \u0026 \\vdots \u0026 \\ddots \\\\ \\end{pmatrix} \\tag{2} $$ 则称 $\\mathbf{P}$ 为转移概率矩阵，一般称为转移矩阵。容易看出 $p_{ij}(i,j\\in S)$ 有性质\n$$ \\begin{aligned} \u0026(1)\\; p_{ij} \\ge 0, \\;i,j\\in S \\\\[5pt] \u0026(2)\\; \\sum_{j \\in S}{p_{ij}} = 1, \\forall i \\in S \\end{aligned} \\tag{3} $$n步转移概率与C-K方程 n步转移概率 定义4：称条件概率\n$$ p_{ij}^{(n)}=P\\{X_{m+n}=j\\;|\\;X_m=i\\}\\quad i,j\\in S,m \\ge 0, n \\ge 1 \\tag{4} $$为马尔可夫链的n步转移概率，相应地称 $\\mathbf{P}^{(n)}=(p_{ij}^{(n)})$ 为n步转移矩阵。\n当 $n=1$ 时， $p_{ij}^{(1)}=p_{ij}$ ， $\\mathbf{P}^{(1)}=\\mathbf{P}$ 。此外规定\n$$ p_{ij}^{(0)}= \\begin{cases} 0, \\quad i \\ne j\\\\[5pt] 1, \\quad i=j \\end{cases} \\tag{5} $$ 显然，n步转移概率 $p_{ij}^{(n)}$ 指的就是系统从状态 $i$ 经过 $n$ 步后转移到了 $j$ 的概率，它对中间的 $n-1$ 步转移经过的状态无要求。下面的定理给出了 $p_{ij}^{(n)}$ 和 $p_{ij}$ 的关系。\nC-K方程 定理1（Chapman-Kolmogorov方程，简称C-K方程）：对一切 $n,m \\ge 0$ ， $i,j \\in S$ 有\n①\n$$ p_{ij}^{(m+n)}=\\sum_{k \\in S}{p_{ik}^{(m)}}p_{kj}^{(n)} \\tag{6} $$ ② $$ \\mathbf{P}^{(n)}=\\mathbf{P} \\cdot \\mathbf{P}^{(n-1)} = \\mathbf{P} \\cdot \\mathbf{P} \\cdot \\mathbf{P}^{(n-2)} = \\cdots = \\mathbf{P}^n \\tag{7} $$ 证明（定理1）：由全概率公式可得\n$$ \\begin{aligned} p_{ij}^{(m+n)}\u0026=P\\{X_{m+n}=j\\;|\\;X_0=i\\}\\\\[5pt] \u0026=\\frac{P\\{X_{m+n}=j,X_0=i\\}}{P\\{X_0=i\\}}\\\\[10pt] \u0026=\\sum_{k \\in S}{\\frac{P\\{X_{m+n}=j,X_m=k,X_0=i\\}}{P\\{X_0=i\\}}}\\text{（全概率公式）}\\\\ \u0026=\\sum_{k \\in S}{\\frac{P\\{X_{m+n}=j,X_m=k,X_0=i\\}}{P\\{X_m=k,X_0=i\\}}\\frac{P\\{X_m=k,X_0=i\\}}{P\\{X_0=i\\}}}\\\\ \u0026=\\sum_{k \\in S}{P\\{X_{m+n}=j\\;|\\;X_m=k,X_0=i\\}}P\\{X_m=k\\;|\\;X_0=i\\}\\\\ \u0026=\\sum_{k \\in S}{p_{kj}^{(n)}p_{ik}^{(m)}}\\\\ \u0026=\\sum_{k \\in S}{p_{ik}^{(m)}p_{kj}^{(n)}} \\end{aligned} \\tag{8} $$ 由矩阵乘法易得②是①的矩阵形式。\n状态的分类及性质 可达、互通、类、可约 定义5：称状态 $i$ 可达状态 $j(i,j \\in S)$，若存在 $n \\ge 0$ 使得 $p_{ij}^{(n)} \\ge 0$ ，记为 $i \\rightarrow j$ 。若同时有状态 $j \\rightarrow i$ ，则称 $i$ 与 $j$ 互通，记为 $i \\leftrightarrow j$ 。\n定理2：互通是一种等价关系，即满足：\n①自反性： $i \\leftrightarrow i$ ；\n②对称性： $i \\leftrightarrow j$ ，则 $j \\leftrightarrow i$ ；\n③传递性： $i \\leftrightarrow j$ , $j \\leftrightarrow k$ ，则 $i \\leftrightarrow k$ 。\n证明（定理2）：从互通的定义可知①②是显然的，只证③。由互通定义可知，需证 $i \\rightarrow k$ 且 $k \\rightarrow i$ 。首先，由 $i \\rightarrow j$ ， $j \\rightarrow k$ 可知存在 $m$ ， $n$ 使得 $p_{ij}^{(m)}\u0026gt;0$ ， $p_{jk}^{(n)}\u0026gt;0$ 。再由C-K方程和概率的非负性可知 $p_{ik}^{(m+n)}=\\displaystyle\\sum_{l \\in S}{p_{il}^{(m)}p_{lk}^{(n)}}\\ge {p_{ij}^{(m)}p_{jk}^{(n)}}\u0026gt;0$ ，故 $i \\rightarrow k$ 。反过来同样有 $k \\rightarrow i$ ，即证 $i \\leftrightarrow k$ 。\n我们把任何两个相通状态归为一个类，由上述定理可知，同在一类的状态应该都是互通的，并且任何一个状态不能同时属于两个不同的类。\n定义6：若马尔可夫链只存在一个类，就称它是不可约的。否则称为可约的。\n周期 定义7：若集合 $\\{n|n \\ge 1,p_{ii}^{(n)} \\ge 0\\}$ 非空，则称它的最大公约数 $d=d(i)$ 为状态 $i$ 的周期。若 $d \\ge 1$ ，则称 $i$ 是周期的；若 $d=1$ ，则称 $i$ 是非周期的。并特别规定上述集合为空集时，称 $i$ 的周期为无穷大。 。\n定理3：若状态 $i,j$ 同属一类，则 $d(i)=d(j)$ 。\n证明（定理3）：由类的定义可知 $i \\leftrightarrow j$ ，即存在 $m,n$ 使$p_{ij}^{(m)}\u0026gt;0,p_{ji}^{(n)}\u0026gt;0$。则由C-K方程和概率的非负性知 $p_{ii}^{(m+n)}=\\displaystyle\\sum_{k \\in S}{p_{ik}^{(m)}p_{ki}^{(n)}} \\ge p_{ij}^{(m)}p_{ji}^{(n)}\u0026gt;0$ 。同时对所有使得 $p_{jj}^{(s)} \u0026gt; 0$ 的 $s$ ，有\n$$ p_{ii}^{(m+s+n)}=\\sum_{k \\in S}{p_{ik}^{(m)}p_{ki}^{(s+n)}}=\\sum_{k \\in S,\\thinspace l \\in S}{p_{ik}^{(m)}p_{kl}^{(s)}p_{li}^{(n)}} \\ge p_{ij}^{(m)}p_{jj}^{(s)}p_{ji}^{(n)}\u003e0 \\tag{9} $$ 由周期的定义可知，由于 $p_{ii}^{(m+n)}\u0026gt;0$ 且 $p_{ii}^{(m+s+n)}\u0026gt;0$ ， $d(i)$ 必然同时整除 $n+m$ 和 $n+m+s$ ，因此，它也必然整除 $s$ （见整除的基本性质）。同时我们还需注意我们已经假设了 $p_{jj}^{(s)} \u0026gt; 0$ ，因此 $d(j)$ 必定也整除 $s$ 。注意 $s$ 的任意性，不妨直接令 $s=d(j)$ ，由此可得 $d(i)$ 整除 $d(j)$ 。我们把上述证明的 $i$ 和 $j$ 交换一下，就也能得到 $d(j)$ 整除 $d(i)$ ，于是 $d(i)=d(j)$ （见整除的基本性质）。\n常返 常返与非常返（瞬过） 定义8：对于任何状态 $i,j$ ，以 $f_{ij}^{(n)}$ 记从i出发经n步后首次到达 $j$ 的概率，则有\n$$ f_{ij}^{(n)}= \\begin{cases} 0 \\quad n=0 \\\\[5pt] P\\{X_n=j,X_k \\ne j(k=1,2,\\cdots ,n-1)\\;|\\; X_0=i\\} \\quad n \\ge 1 \\end{cases} \\tag{10} $$ 令 $f_{ij}=\\displaystyle\\sum_{n=1}^{\\infin}{f_{ij}^{(n)}}$ ，若 $f_{jj}=1$ ，则称状态 $j$ 为常返状态，若 $f_{jj}\u0026lt;1$ ，称 $j$ 为非常返状态或瞬过状态。\n$f_{ij}$ 的含义可由如下得出：由集合 $A_n$ 的定义 $A_n=\\{X_n=j,X_k \\ne j, k=1,2,\\cdots n-1 \\;|\\; X_0=i\\}$ 可知 $n$ 不同的时候 $A_n$ 不相交。而 $\\displaystyle\\bigcup_{n=1}^{\\infin}{A_n}$表示的事件正是总有一个 $n$ 使得过程经 $n$ 步后可从 $i$ 到达 $j$ ,那么由不相交事件概率的可加性可得：\n$$ P(\\bigcup_{n=1}^{\\infin}{A_n})=\\sum_{n=1}^{\\infin}{P(A_n)}=\\sum_{n=1}^{\\infin}f_{ij}^{(n)}=f_{ij} \\tag{11} $$ 因此 $f_{ij}$ 表示从 $i$ 出发，有限步内可以到达 $j$ 的概率。当 $i$ 为常返状态时，以概率 $1$ 从 $i$ 出发，在有限步过程将重新返回 $i$ ，而当 $i$ 为非常返状态时，若也以概率 $1$ 从 $i$ 出发，则以概率 $1-f_{ii}$ 不再回到 $i$ （即从 $i$ 滑过）。\n对于常返态 $i$ ，定义\n$$ \\mu_i=\\sum_{n=1}^{\\infin}{nf_{ii}^{(n)}} \\tag{12} $$ 表示由 $i$ 出发再返回到 $i$ 所需的平均步数（时间）。\n正常返、零常返、遍历、吸收 定义9：对于常返态 $i$ ，若 $\\mu_i\u0026lt;+\\infin$，则称 $i$ 为正常返态；若 $\\mu_i=+\\infin$ ，则称 $i$ 为零常返态。特别地，若 $i$ 正常返且是非周期的，则称之为遍历状态。若 $i$ 是遍历状态，且 $f_{ii}^{(1)}=1$，则称 $i$ 为吸收状态。此时显然 $\\mu_i=1$ 。\n若干性质证明 常返的极限判定 定理4：状态 $i$ 为常返状态当且仅当 $\\displaystyle\\sum_{n=0}^{\\infin}{p_{ii}^{(n)}}=+\\infin$ 。状态 $i$ 为非常返状态时\n$$ \\sum_{n=0}^{(\\infin)}{p_{ii}^{(n)}}=\\frac{1}{1-f_{ii}} \\tag{13} $$ 因而此时有 $\\lim\\limits_{n \\rightarrow \\infin}p_{ii}^{(n)}=0$ 。\n为了证明定理4，我们需要先证明结论1和引理1。\n结论1：对任意状态 $i,j$ ，有\n$$ f_{ij}^{(l+1)}=\\sum_{k \\ne j,\\thinspace k \\in S}{f_{ik}^{(1)}f_{kj}^{(l)}} \\tag{14} $$ 证明（结论1）：由 $f_{ij}^{(n)}$ 的定义、马尔可夫性、时齐性和全概率公式可得\n$$ \\begin{aligned} f_{ij}^{(l+1)}=\u0026P\\{X_{l+1}=j,X_m \\ne j(m=1,2,\\cdots ,l) \\;|\\; X_0=i\\}\\quad \\text{（}f_{ij}^{(n)}\\text{的定义）}\\\\[5pt] =\u0026\\sum_{k \\ne j,\\thinspace k \\in S}{P\\{X_{l+1}=j,X_m \\ne j(m=2,\\cdots ,l),X_1=k \\;|\\; X_0=i\\}}\\text{（全概率公式）}\\\\ =\u0026\\sum_{k \\ne j,\\thinspace k \\in S}{\\frac{P\\{X_{l+1}=j,X_m \\ne j(m=2,\\cdots ,l),X_1=k,X_0=i\\}}{P\\{X_0=i\\}}}\\\\ =\u0026\\sum_{k \\ne j,\\thinspace k \\in S}{\\frac{P\\{X_1=k,X_0=i\\}}{P\\{X_0=i\\}}\\frac{P\\{X_{l+1}=j,X_m \\ne j(m=2,\\cdots ,l),X_1=k,X_0=i\\}}{P\\{X_1=k,X_0=i\\}}}\\\\ =\u0026\\sum_{k \\ne j,\\thinspace k \\in S}{P\\{X_1=k\\;|\\;X_0=i\\}P\\{X_{l+1}=j,X_m \\ne j(m=2,\\cdots ,l)\\;|\\;X_1=k,X_0=i\\}}\\\\ =\u0026\\sum_{k \\ne j,\\thinspace k \\in S}{P\\{X_1=k\\;|\\;X_0=i\\}P\\{X_{l+1}=j,X_m \\ne j(m=2,\\cdots ,l)\\;|\\;X_1=k\\}}\\text{（马尔可夫性）}\\\\ =\u0026\\sum_{k \\ne j,\\thinspace k \\in S}{P\\{X_1=k\\;|\\;X_0=i\\}P\\{X_l=j,X_m \\ne j(m=1,\\cdots ,l-1)\\;|\\;X_0=k\\}}\\text{（时齐性）}\\\\ =\u0026\\sum_{k \\ne j,\\thinspace k \\in S}{f_{ik}^{(1)}f_{kj}^{(l)}} \\end{aligned} \\tag{15} $$ 引理1：对任意状态 $i,j$ 及 $1 \\le n \u0026lt; \\infin$ ，有\n$$ p_{ij}^{(n)}=\\sum_{l=1}^{n}{f_{ij}^{(l)}p_{jj}^{(n-l)}} \\tag{16} $$ 证明（引理1）：用归纳法。对 $n=1$，由 $p_{ij}^{(1)}=f_{ij}^{(1)}$，易证式(16)成立。\n假设对 $n-1$ ，已有 $p_{ij}^{(n-1)}=\\displaystyle\\sum_{l=1}^{n-1}{f_{ij}^{(l)}p_{jj}^{(n-1-l)}}$ 成立。\n当取 $n$ 时，利用C-K方程、归纳假设和结论1，可以推导出\n$$ \\begin{aligned} p_{ij}^{(n)}\u0026=\\sum_{k \\in S}{p_{ik}^{(1)}p_{kj}^{(n-1)}} \\qquad \\text{（C-K方程）}\\\\ \u0026=p_{ij}^{(1)}p_{jj}^{(n-1)}+\\sum_{k \\ne j,\\thinspace k \\in S}{p_{ik}^{(1)}p_{kj}^{(n-1)}}\\\\ \u0026=f_{ij}^{(1)}p_{jj}^{(n-1)}+\\sum_{k \\ne j,\\thinspace k \\in S}{f_{ik}^{(1)}p_{kj}^{(n-1)}} \\text{（归纳法n=1时的情况）}\\\\ \u0026=f_{ij}^{(1)}p_{jj}^{(n-1)}+\\sum_{k \\ne j,\\thinspace k \\in S}{f_{ik}^{(1)}\\bigg(\\sum_{l=1}^{n-1}{f_{kj}^{(l)}p_{jj}^{(n-1-l)}}}\\bigg) \\text{（归纳假设n-1时的情况）}\\\\ \u0026=f_{ij}^{(1)}p_{jj}^{(n-1)}+\\sum_{l=1}^{n-1}{\\bigg(\\sum_{k \\ne j,\\thinspace k \\in S}{f_{ik}^{(1)}f_{kj}^{(l)}}\\bigg)p_{jj}^{(n-1-l)}}\\\\ \u0026=f_{ij}^{(1)}p_{jj}^{(n-1)}+\\sum_{l=1}^{n-1}{f_{ij}^{(l+1)}p_{jj}^{(n-1-l)}} \\quad \\text{(引理1)}\\\\ \u0026=f_{ij}^{(1)}p_{jj}^{(n-1)}+\\sum_{l=2}^{n}{f_{ij}^{(l)}p_{jj}^{(n-l)}}\\\\ \u0026=\\sum_{l=1}^{n}{f_{ij}^{(l)}p_{jj}^{(n-l)}}\\\\ \\end{aligned} \\tag{17} $$ 现在，我们可以用引理1证明定理4。\n证明（定理4）：\n$$ \\begin{aligned} \\sum_{n=0}^{\\infin}{p_{ii}^{(n)}}=\u0026\\:p_{ii}^{(0)}+\\sum_{n=1}^{\\infin}{p_{ii}^{(n)}}\\\\ =\u0026\\:1+\\sum_{n=1}^{\\infin}\\bigg(\\sum_{l=1}^{n}{f_{ii}^{(l)}p_{ii}^{(n-l)}}\\bigg) \\quad \\text{（引理1）}\\\\ =\u0026\\:1+\\sum_{l=1}^{\\infin}\\sum_{n=l}^{\\infin}{f_{ii}^{(l)}p_{ii}^{(n-l)}}\\\\ =\u0026\\:1+\\sum_{l=1}^{\\infin}\\sum_{m=0}^{\\infin}{f_{ii}^{(l)}p_{ii}^{(m)}}\\\\ =\u0026\\:1+\\bigg(\\sum_{l=1}^{\\infin}{f_{ii}^{(l)}}\\bigg)\\bigg(\\sum_{n=0}^{\\infin}{p_{ii}^{(n)}}\\bigg)\\\\ =\u0026\\:1+f_{ii}\\bigg(\\sum_{n=0}^{\\infin}{p_{ii}^{(n)}}\\bigg) \\end{aligned} \\tag{18} $$ 左右有相同项 $\\displaystyle\\sum_{n=0}^{\\infin}{p_{ii}^{(n)}}$，则解该等式得\n$$ \\sum_{n=0}^{\\infin}{p_{ii}^{(n)}}=\\frac{1}{1-f_{ii}} \\tag{19} $$ 因此\n$$ \\sum_{n=0}^{\\infin}{p_{ii}^{(n)}}\\text{收敛}\\iff f_{ii}\u003c1\\text{；} \\sum_{n=0}^{\\infin}{p_{ii}^{(n)}}=\\infin \\iff f_{ii}=1 \\tag{20} $$常返互通则必达 引理2：若 $i \\leftrightarrow j$ 且 $i$ 为常返态，则 $f_{ji}=1$。\n证明（引理2）：用反证法。假设 $f_{ji}\u0026lt;1$ ，则从 $j$ 出发不一定能在有限步内到达 $i$ ，但是由于 $i \\rightarrow j$ ，则从 $i$ 出发一定能在有限步到达 $j$ 。这意味着从 $i$ 出发如果经过 $j$ ，将不一定能在有限步之内再回到 $i$ ，这与 $i$ 的常返性相矛盾，假设不成立。因此 $f_{ij}=1$ 。\n常返是一个类性质 定理5：常返性是一个类性质。\n证明（定理5）：先证明若 $i \\leftrightarrow j$ 则 $i,j$ 同为常返状态或非常返状态。\n由 $i \\leftrightarrow j$ 知。存在 $n, m$ 使得 $p_{ij}^{(n)}\u0026gt;0,p_{ji}^{(m)}\u0026gt;0$ ，由C-K方程和(9)式的展开技巧易得\n$$ p_{ii}^{(n+m+l)} \\ge p_{ij}^{(n)}p_{jj}^{(l)}p_{ji}^{(m)}\\\\[5pt] p_{jj}^{(n+m+l)} \\ge p_{ji}^{(n)}p_{ii}^{(l)}p_{ij}^{(m)} \\tag{21} $$ 两边求和得到\n$$ \\sum_{l=0}^{\\infin}{p_{ii}^{(n+m+l)}} \\ge \\sum_{l=0}^{\\infin}{p_{ij}^{(n)}p_{jj}^{(l)}p_{ji}^{(m)}}\\\\[5pt] \\sum_{l=0}^{\\infin}{p_{jj}^{(n+m+l)}} \\ge \\sum_{l=0}^{\\infin}{p_{ji}^{(n)}p_{ii}^{(l)}p_{ij}^{(m)}} \\tag{22} $$ 考虑到 $\\displaystyle\\sum_{l=0}^{n+m-1}{p_{ii}^{(l)}}$ 和 $\\displaystyle\\sum_{l=0}^{n+m-1}{p_{jj}^{(l)}}$ 都是有限的，那么可以把上式写成这样：\n$$ \\sum_{l=0}^{\\infin}{p_{ii}^{(l)}} - \\sum_{l=0}^{n+m-1}{p_{ii}^{(l)}} \\ge p_{ij}^{(n)}p_{ji}^{(m)}\\sum_{l=0}^{\\infin}{p_{jj}^{(l)}}\\\\[5pt] \\sum_{l=0}^{\\infin}{p_{jj}^{(l)}} - \\sum_{l=0}^{n+m-1}{p_{jj}^{(l)}} \\ge p_{ji}^{(n)}p_{ij}^{(m)}\\sum_{l=0}^{\\infin}{p_{ii}^{(l)}} \\tag{23} $$ 因此我们可以直观的看出 $\\displaystyle\\sum_{l=0}^{n+m-1}{p_{ii}^{(l)}}$ 和 $\\displaystyle\\sum_{l=0}^{n+m-1}{p_{jj}^{(l)}}$ 当中任意一个为无穷时，另一个必然也为无穷；任意一个为有限时，另一个必然也为有限。因此 $i,j$ 同为常返状态或非常返状态。故常返性是一个类性质，类中任意成员满足，则其他成员也必定满足；反之若类中任一成员不满足，则其他成员也不满足。\n其次还能证明当 $i,j$ 同为常返状态时，它们同为正常返态或零常返态。该证明需要用到下文的推论1。\n假设 $i$ 为零常返状态且 $i \\leftrightarrow j$ 。由推论1可知 $\\lim\\limits_{m \\rightarrow \\infin}p_{ii}^{(m)}=0$ 。由于 $i \\leftrightarrow j$ ，存在 $n,l$ 使得 $p_{ij}^{(n)}\u0026gt;0,p_{ji}^{(l)}\u0026gt;0$。同时由C-K方程和(9)式的展开技巧可得 $p_{ii}^{(n+m+l)} \\ge p_{ij}^{(n)}p_{jj}^{(m)}p_{ji}^{(l)}\\ge0$ 。令 $m \\rightarrow \\infin$ ，由夹挤准则可知 $\\lim\\limits_{m \\rightarrow \\infin}p_{jj}^{(m)}=0$ ，故由推论1，状态 $j$ 也是零常返状态。\n状态空间分解定理 定理6（状态空间分解定理）：任意马尔可夫链的状态空间 $S$ ，可唯一分解为有限个或可列个互不相交的子集 $D,C_1,C_2,\\cdots$ 之和，使得\n①每一个 $C_n$ 是常返状态组成的不可约闭集，$D$ 由全体非常返状态组成。。\n② $C_n$ 中的状态同类，或者全是正常返态，或者全是零常返态。它们有相同的周期且 $f_{ij}=1(i,j \\in C_n)$ 。\n③ 自 $C_n$ 中的状态出发不能到达 $D$ 中状态。\n证明（定理6）：设 $C$ 为全体常返状态组成的集合，则 $D=S-C$ 为非常返状态的全体组成的集合。注意到定义在 $C$ 上的互通是一种等价关系，由等价关系与集合的划分可知， $C$ 可以按互通关系划分为 $C_1 \\bigcup C_2 \\bigcup \\dots$ ，其中每一个 $C_n$ 是由同一类常返状态组成的不可约的闭集。因此 $S=D \\bigcup C_1 \\bigcup C_2 \\bigcup \\dots$ 。定理假设和①证毕。由定理5可知 $C_n$ 中的状态都是同类型的（正常返或零常返），由定理3可知 $C_n$ 中的状态都有相同的周期，由引理2可知 $C_n$ 中的状态都满足 $f_{ij}=1(i,j \\in C_n)$ 。②证毕。对于③，可用反证法证明。假设 $C_n$ 中的状态 $i$ 可以到达 $D$ 中的状态 $j$ ，由于 $i$ 是常返的，状态在到达 $j$ 后必定还会再返回 $i$ ，而后再由假设，状态还可能继续回到 $j$ 。因此，状态从 $j$ 出发后再次返回 $j$ 的情况是可能出现的，这与 $j$ 是非常返态相矛盾，因此假设不成立。故 $C_n$ 中的状态 $i$ 不可到达 $D$ 中的状态 $j$ 。③证毕。定理6证毕。\n不可约马尔可夫链的转移 定理7：周期为 $d$ 的不可约马尔可夫链，其状态空间 $S$ 可唯一地分解为 $d$ 个互不相交的子集之和，即\n$$ S=\\bigcup_{r=0}^{d-1}{S_r},\\quad S_r \\bigcap S_s=\\varnothing,\\quad r \\ne S \\tag{24} $$ 且使得自 $S_r$ 任意状态出发，经 $1$ 步转移必进入 $S_{r+1}$ 中（其中 $S_d=S_0$ ）。\n证明（定理7）：先给出子集 $S_r$ 的定义：\n任意取状态 $i$，对每一个 $r=0,1,\\cdots,d-1$ ，定义集合\n$$ S_r=\\{j\\;|\\;存在n \\ge 0使得p_{ij}^{(nd+r)}\u003e0\\} \\tag{25} $$ 因为 $S$ 不可约，故 $S$ 中从 $i$ 出发一定可以遍历每一个状态，而 $nd+r(r=0,1,\\cdots,n-1)$ 可以遍历从 $i$ 出发后的每一个时间，因此所有 $S_r$ 的并集一定为 $S$ ，即 $\\displaystyle\\bigcup_{r=0}^{d-1}{S_r}=S$ 。\n接下来证明 $S_r$ 不相交。用反证法，假设存在 $S_r,S_s$ 和状态 $j$ 满足 $j \\in S_r \\bigcap S_s$ 。由 $S_r$ 的定义知存在 $n,m$ 使得 $p_{ij}^{(nd+r)}\u0026gt;0,p_{ij}^{(md+s)}\u0026gt;0$ 。又因为 $i \\leftrightarrow j$ ，故存在 $h$ 使得 $p_{ji}^{(h)}\u0026gt;0$ ，于是由C-K方程和和(9)式的展开技巧可得：\n$$ p_{ii}^{(nd+r+h)} \\ge p_{ij}^{(nd+r)}p_{ji}^{(h)}\u003e0\\\\[5pt] p_{ii}^{(md+s+h)} \\ge p_{ij}^{(md+s)}p_{ji}^{(h)}\u003e0 \\tag{26} $$ 由周期的定义可知 $nd+r+h$ 和 $md+s+h$ 都可以被 $d$ 整除。省去前面的 $n$ 和 $m$ 可得 $r+h$ 和 $s+h$ 都可被 $d$ 整除。从而其差 $(r+h)-(s+h)=r-s$ 都能被 $d$ 整除(见整除的基本性质)。但是 $0 \\le r \\le d-1,0 \\le s \\le d-1$ ，故 $0 \\le r-s \\le d-1$ ，因此 $r-s$ 只能为 $0$ ，也就是 $r=s$ 。故 $S_r=S_s$ ，假设不成立，故 $S_r$ 不相交。\n接下来证明自 $S_r$ 任意状态出发，经 $1$ 步转移必进入 $S_{r+1}$ 中（其中 $S_d=S_0$ ）。等价于证明对任意 $j \\in S_r$ ，有 $\\displaystyle\\sum_{k \\in S_{r+1}}{p_{jk}^{(1)}}=1$ 。事实上，由 $S_r$ 的定义可知 $p_{ij}^{(nd+r)}\u0026gt;0$ 。而由 $S_r$ 的定义的定义可知对 $k \\notin S_{r+1}$ 必有 $p_{ik}^{(nd+r+1)}=0$ 。因此由C-K方程和和(9)式的展开技巧可推导：\n$$ 0=p_{ik}^{(nd+r+1)} \\ge p_{ij}^{(nd+r)}p_{jk}^{(1)}\u003e0 \\tag{27} $$ 从而 $p_{jk}^{(1)}=0$ 。于是\n$$ 1\\:=\\sum_{k \\in S}{p_{jk}}=\\sum_{k \\in S_{r+1}}{p_{jk}^{(1)}} + \\sum_{k \\notin S_{r+1}}{p_{jk}^{(1)}}=\\sum_{k \\in S_{r+1}}{p_{jk}^{(1)}} \\tag{28} $$ 最后证明分解的唯一性。等价于与证明 $\\{S_k\\}$ 与初始的 $i$ 无关。也就是，对于任意的 $i,i^\\prime$ 生成的分解 $\\{S_k\\},\\{S_k^\\prime\\}$ 必相等。\n首先，证明对于 $\\{S_k\\}$ 中的任意 ${S_r}$ ，存在 ${S_s^\\prime}$ 与其状态完全相等。首先证对所有 $j \\in S_r$ ， $j$ 都只能属于 $\\{S_k^\\prime\\}$ 中某个固定的集合。假设 $i^{\\prime}$ 满足 $i^\\prime \\in S_s$ 。由于自 $S_k$ 任意状态出发经 $1$ 步转移必进入 $S_{k+1}$ 中，所以当 $s \\le r$ 时，从 $i^{\\prime}$ 到达 $j$ 只可能通过如下过程之一：\n$$ \\begin{cases} S_s \\rightarrow S_{s+1} \\rightarrow \\cdots \\rightarrow S_r\\\\ S_s \\rightarrow S_{s+1} \\rightarrow \\cdots \\rightarrow S_r\\rightarrow S_{r+1} \\rightarrow \\cdots \\rightarrow S_{d-1} \\rightarrow S_0 \\rightarrow S_1 \\rightarrow \\cdots \\rightarrow S_r\\\\ S_s \\rightarrow S_{s+1} \\rightarrow \\cdots \\rightarrow S_r\\rightarrow \\overbrace{S_{r+1} \\rightarrow \\cdots \\rightarrow S_{d-1} \\rightarrow S_0 \\rightarrow S_1 \\rightarrow \\cdots \\rightarrow S_r}^{重复2次}\\\\ \\quad \\vdots \\end{cases} \\tag{29} $$ 也就是从 $i^{\\prime}$ 出发只能在 $r-s,r-s+d,r-s+2d,\\dots$ 步上到达 $j$ 。我们发现这刚好与 $S_{r-s}^{\\prime}$ 的定义是一致的。因此 $j \\in S_{r-s}^{\\prime}$ 。反过来讨论任意 $j^\\prime \\in S_{r-s}^{\\prime}$ 。从 $i$ 转移到 $i^\\prime$ 需要 $s$ 步，而从 $i^\\prime$ 转移到 $j^\\prime$ 需要 $r-s$ 步，因此从 $i$ 转移到 $j^\\prime$ 需要 $r$ 步，故 $j^\\prime \\in S_r$ 。故 $S_r$ 与 $S_{r-s}^\\prime$ 完全对等。\n另外当 $s \u0026gt; r$ 时，由类似的方法可以证明从 $i^{\\prime}$ 出发，只能在 $d-(s-r),2d-(s-r),\\dots$ 步到达 $j$ ，因此 $j \\in S_{d-(s-r)}^{\\prime}$ 。类似的也可证明 $S_r$ 与 $S_{d-(s-r)}^{\\prime}$ 完全对等。综上，有\n$$ \\begin{cases} S_r与S_{r-s}^{\\prime}完全对等，若r \\ge s \\\\[5pt] S_r与S_{d-(s-r)}^{\\prime}完全对等，若r \u003c s \\end{cases} \\tag{30} $$ 易证此时 $\\{S_k\\},\\{S_k^\\prime\\}$ 一一对应。故分解是唯一的。\n极限定理与不变分布 极限定理 定理8（极限定理）：若状态 $j$ 是周期为 $d$ 的常返状态，则\n$$ \\lim\\limits_{n \\rightarrow \\infin}p_{jj}^{(nd)}=\\frac{d}{\\mu_j} \\tag{31} $$ 证明（定理8）：对 $n \\ge 0$ ，令：\n$$ r_n=\\sum_{v=n+1}^{\\infin}{f_v} \\tag{32} $$ 其中 $f_v=f_{jj}^{(v)}$ 。于是\n$$ \\begin{aligned} \\sum_{n=0}^{\\infin}{r_n}=\u0026\\sum_{n=0}^{\\infin}\\sum_{v=n+1}^{\\infin}{f_v}\\\\ =\u0026(f_1+f_2+f_3+\\cdots)+(f_2+f_3+\\cdots)+(f_3+\\cdots)+\\cdots\\\\[5pt] =\u00261\\cdot f_1 + 2 \\cdot f_2 + 3 \\cdot f_3 + \\cdots\\\\ =\u0026\\sum_{n=1}^{\\infin}{nf_n}=\\mu_j \\end{aligned} \\tag{33} $$ 由 $r_n$ 定义可知 $f_n=r_{v-1}-r_v$ ，代入引理1并记 $p_v=p_{jj}^{(v)}$ 可得\n$$ p_n=p_{jj}^{(n)}=\\sum_{l=1}^{n}{f_{jj}^{(l)}p_{jj}^{(n-l)}}=-\\sum_{v=1}^{n}{(r_v-r_{v-1})p_{n-v}} \\tag{34} $$ 注意 $j$ 是常返状态，故 $r_0=1$。则上式可以写成\n$$ \\sum_{v=0}^{n}{r_vp_{n-v}}=\\sum_{v=0}^{n-1}r_vp_{n-1-v} \\tag{35} $$ 上面这个式子表示了一个很明显的结论： $\\displaystyle\\sum_{v=0}^{n}{r_vp_{n-v}}$ 的值与 $n$ 无关。因此：\n$$ \\sum_{v=0}^{n}{r_vp_{n-v}}=r_0p_0=1,\\quad n \\ge 0 \\tag{36} $$ 设\n$$ \\lambda=\\limsup\\limits_{n \\rightarrow \\infin}p_{nd} \\tag{37} $$ 根据上极限的定义可知，必然存在 $\\{n\\}$ 的子列 $\\{n_m\\},n_m \\rightarrow \\infin$ 使得\n$$ \\lambda=\\lim\\limits_{m \\rightarrow \\infin}{p_{n_md}}=\\limsup\\limits_{m \\rightarrow \\infin}{p_{n_md}}=\\liminf\\limits_{m \\rightarrow \\infin}{p_{n_md}} \\tag{38} $$ 任取 $s$ 使得 $f_s\u0026gt;0$ ，由引理1和下极限的性质可得\n$$ \\begin{aligned} \\lambda=\u0026\\liminf\\limits_{m \\rightarrow \\infin}p_{n_md}=\\liminf\\limits_{m \\rightarrow \\infin}p_{jj}^{(n_md)}=\\liminf\\limits_{m \\rightarrow \\infin}\\sum_{v=1}^{n_md}f_{jj}^{(v)}p_{jj}^{(n_md-v)}\\\\ =\u0026\\liminf\\limits_{m \\rightarrow \\infin}\\sum_{v=1}^{n_md}f_{v}p_{n_md-v}=\\liminf\\limits_{m \\rightarrow \\infin}\\bigg(f_sp_{n_md-s}+\\sum_{v=1,v \\ne s}^{n_md}f_{v}p_{n_md-v}\\bigg)\\\\ \\le\u0026\\liminf\\limits_{m \\rightarrow \\infin}f_sp_{n_md-s}+\\liminf\\limits_{m \\rightarrow \\infin}\\sum_{v=1,v \\ne s}^{n_md}f_{v}p_{n_md-v}\\quad\\text{（}\\liminf\\limits_{n \\rightarrow \\infin}(a_n+b_n)\\le\\liminf\\limits_{n \\rightarrow \\infin}a_n+\\liminf\\limits_{n \\rightarrow \\infin}b_n\\text{）} \\end{aligned} \\tag{39} $$ 由概率的非负性和上下极限的性质和可推导出\n$$ \\begin{aligned} \\liminf\\limits_{m \\rightarrow \\infin}\\sum_{v=1,v \\ne s}^{n_md}f_{v}p_{n_md-v}\\le\u0026\\sum_{v=1,v \\ne s}^{n_md}\\liminf\\limits_{m \\rightarrow \\infin}f_{v}p_{n_md-v}\\quad\\text{（}\\liminf\\limits_{n \\rightarrow \\infin}(a_n+b_n)\\le\\liminf\\limits_{n \\rightarrow \\infin}a_n+\\liminf\\limits_{n \\rightarrow \\infin}b_n\\text{）}\\\\ \\le\u0026\\sum_{v=1,v \\ne s}^{\\infin}\\liminf\\limits_{m \\rightarrow \\infin}f_{v}p_{n_md-v}\\quad\\text{（概率的非负性）}\\\\ \\le\u0026\\sum_{v=1,v \\ne s}^{\\infin}\\liminf\\limits_{m \\rightarrow \\infin}f_{v}\\limsup\\limits_{m \\rightarrow \\infin}p_{n_md-v}\\quad\\text{（}\\liminf\\limits_{n \\rightarrow \\infin}a_nb_n\\le\\liminf\\limits_{n \\rightarrow \\infin}a_n\\limsup\\limits_{n \\rightarrow \\infin}b_n\\text{）}\\\\ =\u0026\\sum_{v=1,v \\ne s}^{\\infin}f_{v}\\limsup\\limits_{m \\rightarrow \\infin}p_{n_md-v}\\\\ \\end{aligned} \\tag{40} $$ 注意当 $v$ 不是 $d$ 的倍数时 $p_{n_md-v}=0$ ，此时 $\\limsup\\limits_{m \\rightarrow \\infin}p_{n_md-v} \\le \\limsup\\limits_{m \\rightarrow \\infin}p_{n_md}$ ；若 $v$ 是 $d$ 的倍数，由上极限的性质可知仍有 $\\limsup\\limits_{m \\rightarrow \\infin}p_{n_md-v} \\le \\limsup\\limits_{m \\rightarrow \\infin}p_{n_md}$ 。故接(40)式\n$$ \\liminf\\limits_{m \\rightarrow \\infin}\\sum_{v=1,v \\ne s}^{n_md}f_{v}p_{n_md-v}=\\sum_{v=1,v \\ne s}^{\\infin}f_{v}\\limsup\\limits_{m \\rightarrow \\infin}p_{n_md-v}\\le\\bigg(\\sum_{v=1,v \\ne s}^{\\infin}f_{v}\\bigg)\\limsup\\limits_{m \\rightarrow \\infin}p_{n_md} \\tag{41} $$ 注意状态 $j$ 是常返的，所以 $\\displaystyle\\sum_{v=1}^{\\infin}f_{v}=1$ ，也就是 $\\displaystyle\\sum_{v=1,v \\ne s}^{\\infin}f_{v}=1-f_s$ 。而将(38)式 代入(41)式后再将(41)式代回(39)式得\n$$ \\lambda\\le f_s\\liminf\\limits_{m \\rightarrow \\infin}p_{n_md-s}+(1-f_s)\\lambda \\tag{42} $$即\n$$ \\liminf\\limits_{m \\rightarrow \\infin}p_{n_md-s}\\ge\\lambda \\tag{43} $$ 由周期的定义和 $f_s\u0026gt;0$ 知 $d$ 必整除 $s$ 。因此 $\\limsup\\limits_{m \\rightarrow \\infin}p_{n_md-s}=\\limsup\\limits_{m \\rightarrow \\infin}p_{n_md}=\\lambda$ 。但是由上下极限的定义可知 $\\limsup\\limits_{m \\rightarrow \\infin}p_{n_md-s}\\ge\\liminf\\limits_{m \\rightarrow \\infin}p_{n_md-s}$ ，即 $\\lambda=\\limsup\\limits_{m \\rightarrow \\infin}p_{n_md-s}\\ge\\liminf\\limits_{m \\rightarrow \\infin}p_{n_md-s}\\ge\\lambda$ 。故由夹挤准则可知 $\\limsup\\limits_{m \\rightarrow \\infin}p_{n_md-s}=\\liminf\\limits_{m \\rightarrow \\infin}p_{n_md-s}=\\lim\\limits_{m \\rightarrow \\infin}p_{n_md-s}=\\lambda$ 。又由(38)式可得：\n$$ \\lambda=\\lim\\limits_{m \\rightarrow \\infin}p_{n_md}=\\lim\\limits_{m \\rightarrow \\infin}p_{n_md-s}=\\lim\\limits_{m \\rightarrow \\infin}p_{n_md-2s}=\\cdots \\tag{44} $$ 任取 $l$ 个正整数 $c_i$ 和满足 $f_{d_i}\u0026gt;0$ 的 $l$ 个正整数 $d_i,i=1,2,\\cdots,l$ 。由(44)式可知有\n$$ \\lim\\limits_{m \\rightarrow \\infin}p_{n_md-c_id_i}=\\lambda \\tag{45} $$ 注意由周期的定义，$d$ 一定可以整除 $d_i$ 。假设 $d_i=k_id$ ， $k_i$ 为正整数，则(45)式又可以写为\n$$ \\lim\\limits_{m \\rightarrow \\infin}p_{(n_m-c_ik_i)d}=\\lambda \\tag{46} $$ 可以定义一个正整数 $n_m^\\prime=n_m-c_ik_i$ 。则(46)式可以写成\n$$ \\lim\\limits_{m \\rightarrow \\infin}p_{n_m^\\prime d}=\\lambda \\tag{47} $$ 我们发现(47)式和(38)式形式完全一样，因此再次重复从(38)式到(45)式的推导又可以得到\n$$ \\lambda=\\lim\\limits_{m \\rightarrow \\infin}p_{n_m^\\prime d}=\\lim\\limits_{m \\rightarrow \\infin}p_{n_m^\\prime d-s^\\prime}=\\lim\\limits_{m \\rightarrow \\infin}p_{n_m^\\prime d-2s^\\prime}=\\cdots \\tag{48} $$ 也就是\n$$ \\lim\\limits_{m \\rightarrow \\infin}p_{n_m^\\prime d-c_{i^\\prime}d_{i^\\prime}}=\\lambda \\tag{49} $$ 因此，不同的 $c_id_i$ 可以叠加而不影响结论。故对 $u=\\displaystyle\\sum_{i=1}^{l}c_id_i$ 也满足\n$$ \\lim\\limits_{m \\rightarrow \\infin}p_{n_md-u}=\\lambda \\tag{50} $$ 由周期 $d$ 的定义知，存在满足 $f_{d_i}\u0026gt;0$ 的 $d_i,i=1,2,\\cdots,l$ 使得 $d_1,d_2,\\cdots,d_l$ 的最大公因子也是 $d$ 。于是，当 $k$ 大于某个正整数 $k_0$ 时，必有正整数 $c_i$ ，使得\n$$ kd=\\sum_{i=1}^{l}c_id_i \\tag{51} $$ 上述结论见Frobenius问题（实际上 $k_0$ 就是数论中著名的Frobenius数，该数在 $l\\ge3$ 时无一般表示式，但是可以证明 $k_0\\le \\displaystyle\\sum_{i=2}^{l}\\frac{d_i\\cdot gcd(d_1,d_2,\\dots,d_{i-1})}{d \\cdot gcd(d_1,d_2,\\dots,d_i)} - \\displaystyle\\sum_{i=1}^{l}\\frac{d_i}{d}$ ）。于是，对每一个 $k\\ge k_0$ 有\n$$ \\lim\\limits_{n \\rightarrow \\infin}p_{(n_m-k)d}=\\lambda \\tag{52} $$ 在(36)式中令 $n=(n_m-k_0)d$， 并注意到 $v$ 不是 $d$ 的整数倍时 $p_v=0$ ，故可把 $v$ 替换为 $vd$ ，则得\n$$ \\sum_{v=0}^{n_m-k_0}r_{vd}p_{(n_m-k_0-v)d}=1 \\tag{53} $$ 令 $m \\rightarrow \\infin$ 可得\n$$ \\lambda=\\frac{1}{\\displaystyle\\sum_{v=0}^{\\infin}r_{vd}} \\tag{54} $$ 因为当 $v$ 不是 $d$ 的整数倍时，$f_v=0$ ，由(32)式可得\n$$ r_{vd} = r_{vd+1} = \\cdots = r_{vd+d-1} = \\frac{1}{d}\\sum_{j=vd}^{vd+d-1}r_j \\tag{55} $$ 从而由(33)式得\n$$ \\sum_{v=0}^{\\infin}r_{vd}=\\frac{1}{d}\\sum_{v=0}^{\\infin}\\sum_{j=vd}^{vd+d-1}r_j=\\frac{1}{d}\\sum_{v=0}^{\\infin}r_v=\\frac{\\mu_j}{d} \\tag{56} $$ 代入(54)式可得\n$$ \\lambda = \\frac{d}{\\mu_j} \\tag{57} $$ 把(37)式换成 $\\lambda=\\liminf\\limits_{n \\rightarrow \\infin}p_{nd}$ ，下面的推导过程完全相同，仍可以得到 $\\lambda = \\displaystyle\\frac{d}{\\mu_j}$ 。因此，由极限的性质可知\n$$ \\lim\\limits_{n \\rightarrow \\infin}p_{nd}=\\frac{d}{\\mu_j} \\tag{58} $$ 由此，定理8证毕。\n推论1：设 $i$ 为常返状态，则\n$$ i\\text{为零常返状态}\\iff\\lim\\limits_{n \\rightarrow \\infin}p_{ii}^{(n)}=0 \\tag{59} $$ 证明（推论1）：若 $i$ 为零常返状态，则 $\\mu_i \\rightarrow \\infin$ ，从而由定理8知 $\\lim\\limits_{n \\rightarrow \\infin}p_{ii}^{(nd)}=0$ 。而当 $m$ 不等于 $d$ 的整数倍时， $p_{ii}^{(m)}=0$ ，故 $\\lim\\limits_{n \\rightarrow \\infin}p_{ii}^{(n)}=0$ 。反之，若 $\\lim\\limits_{n \\rightarrow \\infin}p_{ii}^{(n)}=0$ ，假如 $i$ 为正常返状态，则由定理8知 $\\lim\\limits_{n \\rightarrow \\infin}p_{ii}^{(nd)}\u0026gt;0$ ，由极限的性质知这与 $\\lim\\limits_{n \\rightarrow \\infin}p_{ii}^{(n)}=0$ 矛盾，因此 $i$ 为零常返状态。\n","date":"2024-09-14T21:05:01+08:00","permalink":"https://www.brasswrench.com/posts/mathematics/stochastic_processes/markov_process/","title":"随机过程（四）：马尔可夫过程"}]